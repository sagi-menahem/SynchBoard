@use '@/styles' as theme;

.header {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  grid-template-areas: 'leading center trailing';
  align-items: center;
  height: auto; // Allow height to adjust when wrapping
  min-height: theme.$header-height;
  padding-inline: theme.$spacing-4;
  // Use CSS custom properties for dynamic background color (85% opacity for glassmorphism)
  background: rgba(var(--header-bg-rgb, 255, 255, 255), 0.85);
  border-bottom: 1px solid var(--glass-border);
  // Use sticky positioning (acts as relative for child absolute positioning)
  position: sticky;
  top: 0;
  z-index: theme.$z-index-sticky;
  transition: all theme.$transition-normal;

  // Glass-morphism effect
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  
  // Apply dynamic text color to all text elements
  color: var(--header-text, var(--color-text-primary));
  
  // When center wraps, span full width
  @supports (grid-template-rows: subgrid) {
    grid-auto-rows: auto;
  }
}

// Variant: Transparent
.transparent {
  background: transparent;
  border-bottom-color: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

// Variant: Elevated (more prominent)
.elevated {
  background: rgba(var(--header-bg-rgb, 255, 255, 255), 0.95);
  box-shadow: theme.$shadow-sm;
}

.leading {
  grid-area: leading;
  display: flex;
  align-items: center;
  gap: theme.$spacing-3;
  min-width: 0;
}

.title {
  // Absolutely center the title in the header
  position: absolute;
  left: 50%;
  transform: translateX(-50%);

  font-size: theme.$font-size-lg;
  font-weight: theme.$font-weight-semibold;
  color: var(--header-text, var(--color-text-primary));
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
  text-align: center;

  // Prevent title from overlapping leading/trailing content
  pointer-events: none;

  @media (min-width: theme.$breakpoint-md) {
    max-width: 300px;
  }

  @media (min-width: theme.$breakpoint-lg) {
    max-width: 400px;
  }
}

.center {
  grid-area: center;
  justify-self: center;
  display: flex;
  align-items: center;
  gap: theme.$spacing-2;
  width: 100%; // Allow full width when wrapping
  max-width: 100%; // Ensure no overflow
  padding: theme.$spacing-2 0; // Add vertical padding when wrapping

  @media (max-width: theme.$breakpoint-md) {
    display: none;

    &[data-show-mobile='true'] {
      display: flex;
    }
  }
}

.trailing {
  grid-area: trailing;
  display: flex;
  align-items: center;
  gap: theme.$spacing-2;
  justify-content: flex-end;
}

// RTL Support using logical properties
[dir='rtl'] .header {
  grid-template-areas: 'trailing center leading';
}

[dir='rtl'] .leading {
  flex-direction: row-reverse;
}

[dir='rtl'] .trailing {
  flex-direction: row-reverse;
}
