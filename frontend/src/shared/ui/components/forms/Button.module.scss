@use '@/styles' as theme;

// --- Button Base Styles ---

// Foundation styles applied to all button variants
.base {
  @include theme.button-base;
  @include theme.button-transition;
  @include theme.button-disabled;
}

// SVG icon styling within buttons
.base svg {
  flex-shrink: 0;
}

// --- Button Variants ---

// Primary action button with prominent styling
.primary {
  background-color: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border-color: transparent;
  font-weight: theme.$font-weight-semibold;

  &:hover:not(:disabled) {
    background-color: var(--btn-primary-bg-hover);
    border-color: transparent;
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-button-hover;
  }

  &:active:not(:disabled) {
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-button-active;
  }
}

// Destructive action button with warning appearance
.destructive {
  background-color: var(--btn-destructive-bg);
  border-color: transparent;
  color: var(--btn-destructive-text);
  font-weight: theme.$font-weight-medium;
  box-shadow: theme.$shadow-button;

  &:hover:not(:disabled) {
    background-color: var(--btn-destructive-bg-hover);
    border-color: transparent;
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-button-hover;
  }

  &:active:not(:disabled) {
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-button-active;
  }
}

// Secondary button with subtle styling
.secondary {
  background-color: var(--btn-secondary-bg);
  color: var(--btn-secondary-text);
  border-color: var(--btn-secondary-border);

  &:hover:not(:disabled) {
    background-color: var(--btn-secondary-bg-hover);
    border-color: var(--btn-secondary-border);
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-button-small;
  }

  &:active:not(:disabled) {
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-button-small;
  }
}

// Icon-only button for toolbar and compact interfaces with glass design
.icon {
  @include theme.interactive-button;
  background: var(--icon-btn-bg);
  @include theme.glass-border;
  color: var(--btn-icon-text);
  cursor: pointer;
  padding: theme.$spacing-2;
  @include theme.rounded-medium;
  @include theme.flex-center;
  @include theme.button-transition;
  min-width: theme.$icon-button-size;
  min-height: theme.$icon-button-size;
  position: relative;

  // Default focus state - remove browser outline, maintain glass border
  &:focus,
  &:focus-visible {
    outline: none;
    border-color: var(--glass-border);
  }

  // Hover state for non-active buttons
  &:hover:not(:disabled):not(.active) {
    background: var(--icon-btn-bg-hover);
    border-color: var(--glass-border);
    color: theme.$text-primary;
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-subtle;
  }

  &:disabled {
    @include theme.button-disabled;
    opacity: 0.3;
    cursor: not-allowed;
  }
}

// Active state for toggle icon buttons - separate block for higher specificity
// This ensures active styles always win over hover/focus states
.icon.active {
  background: var(--icon-btn-bg-active);
  color: theme.$text-primary;
  border-color: var(--glass-border);
  box-shadow: theme.$shadow-button-small;
}

.icon.active:hover,
.icon.active:focus,
.icon.active:focus-visible {
  background: var(--icon-btn-bg-active-hover);
  border-color: var(--glass-border);
  outline: none;
}

// Call-to-action button with glassmorphism style
.cta {
  background: color-mix(in srgb, var(--color-success) 10%, transparent);
  color: var(--btn-cta-bg);
  border: theme.$border-width solid color-mix(in srgb, var(--color-success) 30%, transparent);
  font-weight: theme.$font-weight-semibold;
  box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-success) 10%, transparent);
  min-height: theme.$button-compact-height;
  padding: theme.$spacing-1 theme.$spacing-2;
  font-size: theme.$font-size-xs;

  &:hover:not(:disabled) {
    background: color-mix(in srgb, var(--color-success) 20%, transparent);
    color: var(--btn-cta-bg);
    border-color: color-mix(in srgb, var(--color-success) 50%, transparent);
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-card color-mix(in srgb, var(--color-success) 20%, transparent);
  }

  &:active:not(:disabled) {
    background: color-mix(in srgb, var(--color-success) 25%, transparent);
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-success) 15%, transparent);
  }
}

// Warning button for cautionary actions with glassmorphism style
.warning {
  background: color-mix(in srgb, var(--color-warning) 10%, transparent);
  color: var(--btn-warning-bg);
  border: theme.$border-width solid color-mix(in srgb, var(--color-warning) 30%, transparent);
  font-weight: theme.$font-weight-semibold;
  box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-warning) 10%, transparent);
  min-height: theme.$button-compact-height;
  padding: theme.$spacing-1 theme.$spacing-2;
  font-size: theme.$font-size-xs;

  &:hover:not(:disabled) {
    background: color-mix(in srgb, var(--color-warning) 20%, transparent);
    color: var(--btn-warning-bg);
    border-color: color-mix(in srgb, var(--color-warning) 50%, transparent);
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-card color-mix(in srgb, var(--color-warning) 20%, transparent);
  }

  &:active:not(:disabled) {
    background: color-mix(in srgb, var(--color-warning) 25%, transparent);
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-warning) 15%, transparent);
  }
}

// Secondary action button with glass design (for user pages)
.secondary-glass {
  background: var(--color-glass-secondary);
  color: var(--color-text-primary);
  @include theme.glass-border;
  font-weight: theme.$font-weight-medium;
  box-shadow: theme.$shadow-sm;

  &:hover:not(:disabled) {
    background: var(--color-glass-secondary-hover);
    border-color: var(--glass-border);
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-subtle;
  }

  &:active:not(:disabled) {
    background: var(--color-glass-secondary-active);
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-sm;
  }

  &:focus {
    outline: none;
  }

  &:focus-visible {
    outline: none;
    box-shadow: theme.$shadow-focus-outline var(--glass-border);
  }
}

// Primary action button with glass design (for user pages)
.primary-glass {
  background: color-mix(in srgb, var(--color-primary) 15%, transparent);
  color: var(--btn-primary-bg);
  border: theme.$border-width solid color-mix(in srgb, var(--color-primary) 30%, transparent);
  font-weight: theme.$font-weight-semibold;
  box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-primary) 10%, transparent);

  &:hover:not(:disabled) {
    background: color-mix(in srgb, var(--color-primary) 25%, transparent);
    border-color: color-mix(in srgb, var(--color-primary) 50%, transparent);
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-card color-mix(in srgb, var(--color-primary) 20%, transparent);
  }

  &:active:not(:disabled) {
    background: color-mix(in srgb, var(--color-primary) 30%, transparent);
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-primary) 15%, transparent);
  }

  &:focus {
    outline: none;
  }

  &:focus-visible {
    outline: none;
    box-shadow: theme.$shadow-focus-outline color-mix(in srgb, var(--color-primary) 40%, transparent);
  }
}

// Destructive action button with glass design (for user pages)
.destructive-glass {
  background: color-mix(in srgb, var(--color-error) 15%, transparent);
  color: var(--btn-destructive-bg);
  border: theme.$border-width solid color-mix(in srgb, var(--color-error) 30%, transparent);
  font-weight: theme.$font-weight-semibold;
  box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-error) 10%, transparent);

  &:hover:not(:disabled) {
    background: color-mix(in srgb, var(--color-error) 25%, transparent);
    border-color: color-mix(in srgb, var(--color-error) 50%, transparent);
    transform: translateY(theme.$transform-translate-y-xs);
    box-shadow: theme.$shadow-card color-mix(in srgb, var(--color-error) 20%, transparent);
  }

  &:active:not(:disabled) {
    background: color-mix(in srgb, var(--color-error) 30%, transparent);
    transform: translateY(theme.$spacing-0);
    box-shadow: theme.$shadow-subtle color-mix(in srgb, var(--color-error) 15%, transparent);
  }

  &:focus {
    outline: none;
  }

  &:focus-visible {
    outline: none;
    box-shadow: theme.$shadow-focus-outline color-mix(in srgb, var(--color-error) 40%, transparent);
  }
}

// Link-style button that mimics text links
.link {
  background: none;
  border: none;
  padding: theme.$spacing-0;
  margin: theme.$spacing-0;
  box-shadow: theme.$shadow-none;
  color: var(--color-text-muted);
  text-decoration: none;
  font-weight: theme.$font-weight-normal;
  font-size: theme.$font-size-sm-plus;
  cursor: pointer;
  @include theme.button-transition;

  &:hover:not(:disabled) {
    text-decoration: underline;
    color: var(--color-text-primary);
    background: none;
    border: none;
    transform: none;
    box-shadow: theme.$shadow-none;
  }

  &:focus {
    outline: theme.$border-width-thick solid theme.$primary-light;
    outline-offset: theme.$border-width-thick;
    text-decoration: underline;
    color: var(--color-text-primary);
  }

  &:active:not(:disabled) {
    color: theme.$primary;
    transform: none;
    box-shadow: theme.$shadow-none;
  }

  &:disabled {
    color: theme.$text-disabled;
    cursor: not-allowed;
    text-decoration: none;
    opacity: theme.$opacity-50;
  }
}
