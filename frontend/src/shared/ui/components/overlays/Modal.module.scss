@use '@/styles' as theme;

// --- Modal Layout ---

// Full-screen modal overlay container
.overlay {
  @include theme.fixed-overlay;
  @include theme.flex-center;
  background-color: transparent; // No background - backdrop handles it
  padding: theme.$spacing-0 theme.$spacing-4;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
  z-index: theme.$z-index-modal !important;
  // DO NOT add overflow-y: auto here - only content should scroll, not overlay
}

// Clickable backdrop behind modal content
.backdrop {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background-color: theme.$overlay-strong;
  border: none;
  cursor: pointer;
  z-index: 0; // Behind the content
}

// Modal content container with responsive sizing
.content {
  @include theme.card-base;
  @include theme.rounded-medium;
  @include theme.shadow-heavy;
  @include theme.theme-scrollbar;
  background: var(--user-chosen-color, var(--glass-background));
  border: theme.$border-width solid var(--glass-border);
  min-width: theme.$modal-min-width;
  max-width: theme.$modal-max-width;
  max-height: 90vh;
  height: fit-content;
  position: relative;
  z-index: 10;
  overflow-y: auto;
  margin: theme.$spacing-6 auto;
}

// Special override for wide modals (like create board form)
:global(.modal-wide) .content {
  max-width: 700px;
  width: 100%;
}

// Close button at top-right of modal content (scrolls with content)
.closeButton {
  position: absolute;
  top: theme.$spacing-5;
  inset-inline-end: theme.$spacing-2;
  z-index: 10;
  background: var(--user-chosen-color, var(--glass-background));
  border: theme.$border-width solid theme.$border-strong;
  border-radius: theme.$border-radius-sm;
  padding: theme.$spacing-2;
  line-height: 1;
  min-width: 36px;
  min-height: 36px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

// --- Responsive Design ---

// Tablet responsive adjustments
@media (max-width: theme.$breakpoint-md) {
  .overlay {
    padding: theme.$spacing-4 theme.$spacing-2;
  }

  .content {
    min-width: 280px;
    max-width: calc(100vw - theme.$spacing-4);
    max-height: calc(100vh - theme.$spacing-8);
    padding: theme.$spacing-6;
    margin: theme.$spacing-4 auto;
  }

  .closeButton {
    top: theme.$spacing-2;
    inset-inline-end: theme.$spacing-2;
  }
}

// Mobile responsive adjustments
@media (max-width: theme.$breakpoint-sm) {
  .overlay {
    padding: 0;
    align-items: stretch;
    justify-content: stretch;
  }

  .content {
    min-width: 0;
    width: 100vw;
    max-width: 100vw;
    height: 100%;
    max-height: 100%;
    margin: 0;
    border-radius: 0;
    padding: theme.$spacing-4;
    padding-top: theme.$spacing-12;
    overflow-x: hidden;
    overflow-y: auto;
    box-sizing: border-box;
  }

  .closeButton {
    top: theme.$spacing-3;
    inset-inline-end: theme.$spacing-3;
    min-width: 36px;
    min-height: 36px;
    width: 36px;
    height: 36px;
  }
}