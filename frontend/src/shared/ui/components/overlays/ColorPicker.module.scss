@use '@/styles' as theme;

// =============================================================================
// COLOR PICKER COMPONENT STYLES
// =============================================================================
// Advanced color picker with glass design for canvas settings.
// Features a saturation/brightness picker, hue slider, and preset color palette.
// =============================================================================

// -----------------------------------------------------------------------------
// LAYOUT & CONTAINER
// -----------------------------------------------------------------------------

.colorPickerContainer {
  position: relative;
  @include theme.flex-start;
}

.label {
  @include theme.flex-start;
  margin-right: theme.$spacing-2;
  color: theme.$text-muted;
  font-size: theme.$font-size-xs;
  font-weight: theme.$font-weight-normal;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  height: theme.$icon-button-size-sm;
}

// -----------------------------------------------------------------------------
// COLOR SWATCH BUTTON
// -----------------------------------------------------------------------------

.swatch {
  // Reset button to transparent for color swatch display
  @include theme.button-reset;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
  cursor: pointer;
  pointer-events: auto;
  min-width: theme.$icon-button-size !important;
  min-height: theme.$icon-button-size !important;
  border-radius: theme.$border-radius-full !important;

  &:hover {
    transform: none !important;
    box-shadow: none !important;
    background: transparent !important;
  }

  &.disabled {
    opacity: theme.$opacity-50;
    cursor: not-allowed;
    pointer-events: none;
  }
}

.colorFill {
  width: theme.$color-swatch-size;
  height: theme.$color-swatch-size;
  border-radius: theme.$border-radius-full;
  border: theme.$border-width-thick solid var(--glass-border);
  cursor: pointer;
  @include theme.smooth-transition;

  &:hover {
    transform: scale(theme.$scale-emphasis);
    box-shadow: theme.$shadow-subtle;
  }
}

// -----------------------------------------------------------------------------
// BACKDROP (catches clicks outside picker)
// -----------------------------------------------------------------------------

.backdrop {
  position: fixed;
  inset: 0;
  z-index: calc(theme.$z-index-popover-above-modal - 1);
  background: transparent;
  cursor: default;
}

// -----------------------------------------------------------------------------
// POPOVER CONTAINER
// -----------------------------------------------------------------------------

.popover {
  position: fixed !important;
  z-index: theme.$z-index-popover-above-modal !important;
  pointer-events: auto;

  // Use user-chosen color for settings pages, fallback to glass-background
  @include theme.glass-background;
  @include theme.glass-border;
  border-radius: theme.$border-radius-xl;
  box-shadow: theme.$shadow-lg;
  padding: theme.$spacing-4;

  // Animation
  animation: popoverIn theme.$transition-normal ease-out;
}

@keyframes popoverIn {
  from {
    opacity: 0;
    transform: translateY(calc(-1 * theme.$spacing-2));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// -----------------------------------------------------------------------------
// COLOR PICKER CONTENT
// -----------------------------------------------------------------------------

.colorfulWrapper {
  display: flex;
  flex-direction: column;
  gap: theme.$spacing-3;
  width: 220px;
}

// Override react-colorful styles for better integration
.pickerArea {
  width: 100%;

  // Saturation/brightness picker
  :global(.react-colorful) {
    width: 100% !important;
    height: auto !important;
    gap: theme.$spacing-3;
  }

  :global(.react-colorful__saturation) {
    width: 100% !important;
    height: theme.$color-picker-height !important;
    border-radius: theme.$border-radius-lg !important;
    border: theme.$border-width solid var(--glass-border) !important;
  }

  :global(.react-colorful__saturation-pointer) {
    width: theme.$color-swatch-size-sm !important;
    height: theme.$color-swatch-size-sm !important;
    border: 3px solid white !important;
    box-shadow:
      theme.$shadow-button,
      inset 0 0 0 1px rgba(0, 0, 0, 0.1) !important;
  }

  // Hue slider
  :global(.react-colorful__hue) {
    width: 100% !important;
    height: theme.$color-picker-slider-height !important;
    border-radius: theme.$border-radius-full !important;
    margin-top: theme.$spacing-2;
    border: theme.$border-width solid var(--glass-border) !important;
  }

  :global(.react-colorful__hue-pointer) {
    width: theme.$color-swatch-size-xs !important;
    height: theme.$color-swatch-size-xs !important;
    border: 3px solid white !important;
    box-shadow:
      theme.$shadow-button,
      inset 0 0 0 1px rgba(0, 0, 0, 0.1) !important;
  }
}

// -----------------------------------------------------------------------------
// SECTION DIVIDER
// -----------------------------------------------------------------------------

.divider {
  width: 100%;
  height: theme.$border-width;
  background: var(--glass-border);
  margin: theme.$spacing-1 0;
}

// -----------------------------------------------------------------------------
// PRESET COLORS SECTION
// -----------------------------------------------------------------------------

.presetsSection {
  display: flex;
  flex-direction: column;
  gap: theme.$spacing-2;
}

.presetsLabel {
  font-size: theme.$font-size-xs;
  font-weight: theme.$font-weight-medium;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.presetColors {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: theme.$spacing-1-5;
}

.presetColor {
  // Reset button for color preset swatches
  @include theme.button-reset;
  width: theme.$color-swatch-size-sm;
  height: theme.$color-swatch-size-sm;
  border: 1.5px solid var(--glass-border) !important;
  border-radius: theme.$border-radius-sm;
  cursor: pointer;
  @include theme.smooth-transition;

  &:hover {
    transform: scale(theme.$scale-strong);
    box-shadow: theme.$shadow-button-hover;
    z-index: theme.$z-index-base;
  }

  &:focus {
    outline: none;
    border-color: var(--color-primary) !important;
    box-shadow: theme.$shadow-focus-ring var(--color-primary-light);
  }

  &:active {
    transform: scale(theme.$scale-press);
  }

  &.active {
    border-color: var(--color-primary) !important;
    box-shadow: theme.$shadow-focus-ring var(--color-primary-light);
  }
}

// -----------------------------------------------------------------------------
// RESPONSIVE ADJUSTMENTS
// -----------------------------------------------------------------------------

@media (max-width: theme.$breakpoint-sm) {
  .colorfulWrapper {
    width: 200px;
  }

  // Keep 9 columns on mobile (same as desktop) for consistent grid layout
  .presetColors {
    gap: theme.$spacing-1;
  }

  .presetColor {
    width: theme.$color-swatch-size-xs;
    height: theme.$color-swatch-size-xs;
  }
}
