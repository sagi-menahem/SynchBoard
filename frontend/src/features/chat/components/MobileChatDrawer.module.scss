@use '@/styles' as theme;

// Drawer overlay with backdrop blur
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  z-index: theme.$z-index-overlay;
}

// Main drawer content container
.content {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: theme.$z-index-modal;
  display: flex;
  flex-direction: column;
  // Use dynamic height that accounts for keyboard
  // Falls back to 85vh when no keyboard is present
  height: calc(85vh - var(--keyboard-height, 0px));
  max-height: calc(100vh - var(--keyboard-height, 0px) - env(safe-area-inset-top, 0px));
  background: var(--color-surface);
  border-top-left-radius: theme.$border-radius-xl;
  border-top-right-radius: theme.$border-radius-xl;
  outline: none;
  // Smooth transition when keyboard appears/disappears
  transition: height 0.15s ease-out, max-height 0.15s ease-out;
  // Prevent content from being pushed off screen
  overflow: hidden;

  // Safe area padding for notched devices
  padding-bottom: env(safe-area-inset-bottom, 0);
}

// Drag handle container
.handleContainer {
  display: flex;
  justify-content: center;
  padding: theme.$spacing-3 0;
  flex-shrink: 0;
}

// Visual drag handle indicator
.handle {
  width: 48px;
  height: 4px;
  background: var(--color-border-strong);
  border-radius: theme.$border-radius-full;
  opacity: 0.6;
  @include theme.hover-transition;

  &:hover {
    opacity: 1;
  }
}

// Drawer title styling
.title {
  font-size: theme.$font-size-lg;
  font-weight: theme.$font-weight-semibold;
  color: var(--color-text-primary);
  text-align: center;
  padding: 0 theme.$spacing-4 theme.$spacing-2;
  margin: 0;
  flex-shrink: 0;
  border-bottom: 1px solid var(--color-border-light);
}

// Chat content container - fills remaining space
.chatContainer {
  flex: 1 1 auto;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  // Ensure container adapts to keyboard
  position: relative;

  // Override ChatWindow Card styles for drawer context
  :global(.card) {
    border: none;
    border-radius: 0;
    height: 100%;
    box-shadow: none;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }
}

// Ensure smooth animations don't interfere with keyboard
@media (prefers-reduced-motion: reduce) {
  .content {
    transition: none;
  }
}
